# 常春藤尾牙互動遊戲 - 完整前期規劃文檔

> **專案代號**: Year-End-Party-Game  
> **專案名稱**: 常春藤尾牙互動遊戲 (常春藤骰子大賽)  
> **規劃日期**: 2025-12-28  
> **規劃方法論**: 中心程式開發方法 (CPDM)  
> **文檔版本**: 1.0  
> **實際開發期間**: 2025-12-22 ~ 2025-12-25

---

## 📌 專案概述

### 專案背景

**常春藤尾牙互動遊戲**是一個創新的年終尾牙活動互動系統,透過大螢幕主機與手機玩家的即時連線,打造刺激的骰子競賽遊戲。

**實際開發數據**:
- 開發時間: 4 天
- 總工時: 4.1 小時
- 對話次數: 3 次
- 主要功能: 多桌即時競賽、AI 主持人、動態配置

### 專案目標

1. **沉浸式尾牙互動體驗** - 大螢幕 + 手機即時互動
2. **支援大規模活動** - 1-50 桌, 每桌 12+ 人
3. **即時互動與同步** - P2P 通訊, 即時分數統計
4. **易於部署** - Vercel 免費雲端部署

### 成功標準

| 指標 | 目標值 |
|------|--------|
| 連線穩定性 | ≥ 95% |
| 即時同步延遲 | ≤ 500ms |
| 支援桌數 | ≥ 30 桌 |

---

## 🎨 核心功能

### 主機端功能
- 遊戲配置 (桌數 1-50, 時長 10-300秒)
- QR Code 生成
- 即時戰況圖表
- AI 主持人講評
- 全螢幕結果展示

### 手機端功能
- 掃描加入
- 頭像/桌號/暱稱選擇
- 骰子點擊競賽
- 個人結果查看

---

## 🛠️ 技術棧

| 類別 | 技術 | 用途 |
|------|------|------|
| 前端框架 | React 18 + TypeScript | UI 開發 |
| 建置工具 | Vite | 快速建置 |
| 樣式 | TailwindCSS | 快速樣式開發 |
| 圖表 | Recharts | 即時戰況圖表 |
| 通訊 | PeerJS | P2P 即時通訊 |
| AI | Gemini API | AI 主持人講評 |
| 部署 | Vercel | 免費雲端部署 |

---

## 📅 開發階段

### 實際開發歷程

**Day 1-2: 系統分析與在地化**
- 分析專案架構
- 繁體中文化
- 測試環境建立
- 雲端部署設定

**Day 3: 功能優化**
- 動態桌數配置
- 遊戲時長設定
- 手機端介面優化
- 桌號選擇橫向滑動

**Day 4: 顯示優化**
- 即時戰況圖表優化
- 桌號錯亂修復
- 全螢幕結果展示
- 多輪比賽支援

---

## ⚠️ 風險管理

### 實際遇到的問題

#### 問題 1: 手機端桌數同步失敗
**現象**: 手機端只顯示 10 桌,無法同步主機設定  
**原因**: 連線時間差,手機錯過主機同步訊息  
**解決**: 主機延遲 0.5 秒發送,確保通道暢通

#### 問題 2: Git 衝突導致部署失敗
**現象**: Vercel 建置失敗,parse5 錯誤  
**原因**: index.html 存在未解決的 Git 衝突標記  
**解決**: 清除衝突標記,重新提交

#### 問題 3: 桌號顯示錯亂
**現象**: 即時戰況圖表桌號不正確  
**原因**: 資料型別不一致  
**解決**: 明確數值轉換,按分數排序

---

## 📊 專案結構

```
常春藤尾牙互動遊戲/
├── components/
│   ├── LandingScreen.tsx      # 首頁
│   ├── HostScreen.tsx          # 主機畫面
│   └── MobilePlayer.tsx        # 手機玩家
├── services/
│   ├── peerService.ts          # P2P 通訊
│   └── geminiService.ts        # AI 服務
├── types.ts                    # 型別定義
├── App.tsx                     # 主應用
├── index.html                  # HTML 入口
├── vite.config.ts              # Vite 配置
└── package.json                # 依賴管理
```

---

## 🎯 關鍵成功因素

1. **P2P 通訊穩定性** - PeerJS 確保即時同步
2. **動態配置彈性** - 支援 1-50 桌動態調整
3. **UI/UX 優化** - 橫向滑動、全螢幕展示
4. **AI 整合** - Gemini 提供智能講評
5. **快速部署** - Vercel 一鍵部署

---

**文檔狀態**: ✅ 已完成  
**版本**: 1.0  
**建立日期**: 2025-12-28  
**實際開發**: 2025-12-22 ~ 2025-12-25
