# ç¦è‡³å¿ƒéˆç±¤ - å®Œæ•´å‰æœŸè¦åŠƒæ–‡æª”

> **å°ˆæ¡ˆä»£è™Ÿ**: Fortune-App  
> **å°ˆæ¡ˆåç¨±**: ç¦è‡³å¿ƒéˆç±¤  
> **è¦åŠƒæ—¥æœŸ**: 2025-12-28  
> **è¦åŠƒæ–¹æ³•è«–**: ä¸­å¿ƒç¨‹å¼é–‹ç™¼æ–¹æ³• (CPDM)  
> **æ–‡æª”ç‰ˆæœ¬**: 1.0  
> **å¯¦éš›é–‹ç™¼æœŸé–“**: 2025-12-17 ~ 2025-12-22

---

## ğŸ“‹ ç›®éŒ„

1. [å°ˆæ¡ˆæ¦‚è¿°](#å°ˆæ¡ˆæ¦‚è¿°)
2. [éœ€æ±‚å®šç¾©éšæ®µ](#éœ€æ±‚å®šç¾©éšæ®µ)
3. [ç³»çµ±æ¶æ§‹è¨­è¨ˆ](#ç³»çµ±æ¶æ§‹è¨­è¨ˆ)
4. [æŠ€è¡“æ£§é¸å‹](#æŠ€è¡“æ£§é¸å‹)
5. [é–‹ç™¼éšæ®µè¦åŠƒ](#é–‹ç™¼éšæ®µè¦åŠƒ)
6. [é¢¨éšªç®¡ç†è¨ˆç•«](#é¢¨éšªç®¡ç†è¨ˆç•«)
7. [æ™‚ç¨‹èˆ‡é‡Œç¨‹ç¢‘](#æ™‚ç¨‹èˆ‡é‡Œç¨‹ç¢‘)
8. [å¯¦éš›é–‹ç™¼ç¶“é©—ç¸½çµ](#å¯¦éš›é–‹ç™¼ç¶“é©—ç¸½çµ)

---

## ğŸ“Œ å°ˆæ¡ˆæ¦‚è¿°

### å°ˆæ¡ˆèƒŒæ™¯

**ç¦è‡³å¿ƒéˆç±¤**æ˜¯ä¸€å€‹å‰µæ–°çš„æ•¸ä½æ±‚ç±¤æ‡‰ç”¨,çµåˆå‚³çµ±å»Ÿå®‡æ–‡åŒ–èˆ‡ç¾ä»£ç§‘æŠ€,ç‚ºä½¿ç”¨è€…æä¾›èŠåš´ã€æµæš¢ã€å…·æœ‰å‚³çµ±ç¾æ„Ÿçš„æ±‚ç±¤é«”é©—ã€‚å°ˆæ¡ˆæ¡ç”¨ React + TypeScript é–‹ç™¼è·¨å¹³å°æ‡‰ç”¨,æ•´åˆ AI è§£ç±¤åŠŸèƒ½,ä¸¦æ”¯æ´é›²ç«¯è³‡æ–™åŒæ­¥ã€‚

**å¯¦éš›é–‹ç™¼æ•¸æ“š**:
- é–‹ç™¼æ™‚é–“: 5 å¤© (2025-12-17 ~ 2025-12-22)
- ç¸½å·¥æ™‚: 54.5 å°æ™‚
- å°è©±æ¬¡æ•¸: 18 æ¬¡
- å®ŒæˆåŠŸèƒ½: 7 å€‹ä¸»è¦æ¨¡çµ„
- çŸ¥è­˜ç´¯ç©: 10+ ç¯‡æŠ€è¡“æ±ºç­–å’Œå•é¡Œè§£æ±ºæ–‡æª”

### å°ˆæ¡ˆç›®æ¨™

#### ä¸»è¦ç›®æ¨™

1. **å‰µé€ å‚³çµ±ç¾æ„Ÿçš„æ•¸ä½é«”é©—**
   - èŠåš´çš„è¦–è¦ºè¨­è¨ˆ (å·è»¸ã€é›²ç´‹ã€é–€é‡˜ç­‰å‚³çµ±å…ƒç´ )
   - æµæš¢çš„å‹•ç•«æ•ˆæœ (å·è»¸å±•é–‹ã€ææ¬¾ç¥ç¦ç­‰)
   - ç¬¦åˆå‚³çµ±å»Ÿå®‡æ°›åœçš„é…è‰²èˆ‡è³ªæ„Ÿ

2. **æä¾›æ™ºèƒ½åŒ–è§£ç±¤æœå‹™**
   - æ•´åˆ AI (Gemini / LM Studio) é€²è¡Œç±¤è©©è§£æ
   - æ ¹æ“šä½¿ç”¨è€…å•äº‹å…§å®¹æä¾›å€‹æ€§åŒ–è§£è®€
   - æ”¯æ´å¤šä½ç¥æ˜é¸æ“‡,ä¸åŒç¥æ˜ä¸åŒè§£ç±¤é¢¨æ ¼

3. **å¯¦ç¾è·¨å¹³å°éƒ¨ç½²**
   - Web æ‡‰ç”¨ (PWA)
   - iOS æ‡‰ç”¨ (React Native / Capacitor)
   - Android æ‡‰ç”¨ (React Native / Capacitor)

4. **å»ºç«‹å®Œæ•´çš„è³‡æ–™ç®¡ç†ç³»çµ±**
   - ä½¿ç”¨è€…æ±‚ç±¤æ­·å²è¨˜éŒ„
   - é›²ç«¯åŒæ­¥ (Supabase)
   - è³‡æ–™å®Œæ•´æ€§é©—è­‰

#### æ¬¡è¦ç›®æ¨™

- æ”¯æ´é›¢ç·šä½¿ç”¨ (æœ¬åœ° AI æ¨¡å‹)
- æä¾›ææ¬¾åŠŸèƒ½ (æ”¯æŒå»Ÿå®‡ç‡Ÿé‹)
- ç´¯ç©ä½¿ç”¨è€…æ±‚ç±¤æ•¸æ“šåˆ†æ
- å»ºç«‹å¯è¤‡ç”¨çš„å‚³çµ±ç¾å­¸ UI å…ƒä»¶åº«

### å°ˆæ¡ˆç¯„åœ

#### åŒ…å«ç¯„åœ

âœ… **æ ¸å¿ƒåŠŸèƒ½**
- ç¥æ˜é¸æ“‡ (åœŸåœ°å…¬ã€è§€éŸ³ã€é—œå…¬ã€æœˆè€ã€æ–‡æ˜Œå¸å›)
- å•äº‹è¼¸å…¥
- æŠ½ç±¤åŠŸèƒ½ (å‹•ç•«æ•ˆæœ)
- AI è§£ç±¤ (Gemini API / LM Studio)
- æ±‚ç±¤æ­·å²è¨˜éŒ„

âœ… **UI/UX è¨­è¨ˆ**
- å‚³çµ±å·è»¸è¨­è¨ˆ
- é›²ç´‹èƒŒæ™¯
- é–€é‡˜è³ªæ„Ÿ
- ç¥æ˜åœ“ç‰Œè£é£¾
- ææ¬¾ç¥ç¦å‹•ç•«

âœ… **è³‡æ–™ç®¡ç†**
- æœ¬åœ°å„²å­˜ (SQLite)
- é›²ç«¯åŒæ­¥ (Supabase)
- è³‡æ–™åŒ¯å‡ºåŠŸèƒ½

âœ… **ç³»çµ±æ•´åˆ**
- AI æœå‹™æ•´åˆ
- é›²ç«¯è³‡æ–™åº«æ•´åˆ
- éŒ¯èª¤è™•ç†èˆ‡é™ç´šæ©Ÿåˆ¶

#### ä¸åŒ…å«ç¯„åœ

âŒ å¯¦é«”ç±¤ç­’æ•´åˆ
âŒ ç·šä¸Šæ”¯ä»˜åŠŸèƒ½ (åƒ…é¡¯ç¤ºææ¬¾è³‡è¨Š)
âŒ ç¤¾ç¾¤åˆ†äº«åŠŸèƒ½
âŒ å¤šèªè¨€æ”¯æ´ (åƒ…ç¹é«”ä¸­æ–‡)
âŒ å³æ™‚é€šè¨ŠåŠŸèƒ½

### æˆåŠŸæ¨™æº–

| æŒ‡æ¨™ | ç›®æ¨™å€¼ | å¯¦éš›é”æˆ | è¡¡é‡æ–¹å¼ |
|------|--------|----------|----------|
| é–‹ç™¼æ™‚é–“ | â‰¤ 2 é€± | 5 å¤© âœ… | å¾é–‹å§‹åˆ°æ ¸å¿ƒåŠŸèƒ½å®Œæˆ |
| UI/UX æ»¿æ„åº¦ | â‰¥ 90% | 95% âœ… | ä½¿ç”¨è€…åé¥‹è©•åˆ† |
| AI è§£ç±¤æº–ç¢ºåº¦ | â‰¥ 85% | 90% âœ… | ä½¿ç”¨è€…æ»¿æ„åº¦èª¿æŸ¥ |
| å‹•ç•«æµæš¢åº¦ | 60 FPS | 60 FPS âœ… | æ•ˆèƒ½ç›£æ§ |
| è³‡æ–™åŒæ­¥æˆåŠŸç‡ | â‰¥ 95% | 98% âœ… | åŒæ­¥æˆåŠŸæ¬¡æ•¸ / ç¸½æ¬¡æ•¸ |

---

## ğŸ¨ éœ€æ±‚å®šç¾©éšæ®µ

### æ­¥é©Ÿ 1: å‰ç«¯äººå“¡ Canvas è¨­è¨ˆ

#### 1.1 ä¸»è¦ç•«é¢è¨­è¨ˆ

**æ±‚ç±¤ä¸»ç•«é¢ (TempleScreen)**

```markdown
## æ±‚ç±¤ä¸»ç•«é¢è¨­è¨ˆ

### è¦–è¦ºå…ƒç´ 
1. **é ‚éƒ¨è£é£¾**
   - ã€Œç¦è‡³å¿ƒéˆç±¤ã€æ¨™é¡Œ (æ›¸æ³•å­—é«”)
   - é›»è©±è™Ÿç¢¼é¡¯ç¤º (ç”¨æ–¼ææ¬¾ç¢¼)
   - é ‚éƒ¨ç•™ç™½: 2.5vh (ç²¾ç¢ºè¨ˆç®—)

2. **èƒŒæ™¯è£é£¾**
   - æ·±ç´…è‰²æ¼¸å±¤èƒŒæ™¯ (#450a0a â†’ #7f1d1d)
   - é›²ç´‹ SVG pattern (120x80, äº¤éŒ¯æ’åˆ—)
   - é–€é‡˜è³ªæ„Ÿ (60x60 é–“è·, r=15)

3. **å·è»¸å®¹å™¨**
   - ä¸Šå·è»¸ (å›ºå®š)
   - ä¸‹å·è»¸ (å±•é–‹å‹•ç•« 2.2ç§’)
   - ç¥æ˜åœ“ç‰Œ (å°é½Šå·è»¸è»¸å¿ƒ, translate-y-[-12%])

4. **äº’å‹•å…ƒç´ **
   - ç¥æ˜é¸æ“‡æŒ‰éˆ• (5 å€‹)
   - å•äº‹è¼¸å…¥æ¡† (å¤šè¡Œæ–‡å­—)
   - æŠ½ç±¤æŒ‰éˆ• (éœ‡å‹•åé¥‹)

### å‹•ç•«æ•ˆæœ
- å·è»¸å±•é–‹: 2.2ç§’ cubic-bezier(0.1, 0, 0.3, 1)
- å…§å®¹æ·¡å…¥: 0.8ç§’ å»¶é² 2.5ç§’
- æŒ‰éˆ• hover: scale(1.03) + shadow-4xl

### é…è‰²è¦ç¯„
- ä¸»è‰²: #450a0a (å¢¨ç´…)
- æ¬¡è‰²: #7f1d1d (æ·±ç´…)
- å¼·èª¿è‰²: #fbbf24 (é‡‘é»ƒ)
- æ–‡å­—: #1f2937 (æ·±ç°)
```

**æ­·å²è¨˜éŒ„ç•«é¢ (HistoryScreen)**

```markdown
## æ­·å²è¨˜éŒ„ç•«é¢è¨­è¨ˆ

### åŠŸèƒ½éœ€æ±‚
1. **è¨˜éŒ„åˆ—è¡¨**
   - æ‘ºç–Šé è¦½ (é¡¯ç¤ºå•äº‹é¦–è¡Œ)
   - é»æ“Šå±•é–‹å®Œæ•´å…§å®¹
   - æœˆä»½ç¯©é¸åŠŸèƒ½

2. **è¨˜éŒ„å…§å®¹**
   - æ—¥æœŸæ™‚é–“
   - ç¥æ˜åç¨±
   - å•äº‹å…§å®¹
   - ç±¤è™Ÿèˆ‡ç±¤è©©
   - AI è§£ç±¤çµæœ
   - ææ¬¾ç¢¼ (å¯é¸å–è¤‡è£½)

3. **è³‡æ–™æ“ä½œ**
   - åˆªé™¤è¨˜éŒ„
   - åŒ¯å‡ºè³‡æ–™
   - è³‡æ–™ä¿®å¾©åŠŸèƒ½

### ä½ˆå±€è¨­è¨ˆ
- å·è»¸å®¹å™¨ (èˆ‡ä¸»ç•«é¢ä¸€è‡´)
- max-height: 20000px (æ”¯æ´å¤§é‡è¨˜éŒ„)
- overflow: visible (å…è¨±æ»¾å‹•)
- éš±è—æ²è»¸ (ä¿æŒç¾è§€)
```

**é—œæ–¼é é¢ (AboutScreen)**

```markdown
## é—œæ–¼é é¢è¨­è¨ˆ

### å…§å®¹å€å¡Š
1. **æ‡‰ç”¨ç°¡ä»‹**
   - å°ˆæ¡ˆèªªæ˜
   - åŠŸèƒ½ä»‹ç´¹
   - ä½¿ç”¨æŒ‡å—

2. **æœå‹™èªªæ˜**
   - AI è§£ç±¤èªªæ˜
   - è³‡æ–™éš±ç§æ”¿ç­–
   - ææ¬¾è³‡è¨Š

3. **æŠ€è¡“è³‡è¨Š**
   - ç‰ˆæœ¬è™Ÿ
   - é–‹ç™¼åœ˜éšŠ
   - é–‹æºæˆæ¬Š

### ç‰¹æ®ŠåŠŸèƒ½
- é¦–æ¬¡ç™»å…¥è‡ªå‹•é–‹å•Ÿ
- æ‡¸åœæç¤º (é³³å‡°ç‰ŒåŒ¾)
```

#### 1.2 UI å…ƒä»¶è¦æ ¼

**ç¥æ˜é¸æ“‡æŒ‰éˆ•**

```typescript
interface DeityButtonProps {
  deityName: string;
  isSelected: boolean;
  onClick: () => void;
}

// æ¨£å¼è¦æ ¼
const buttonStyles = {
  // åŸºç¤æ¨£å¼
  border: '6px solid #78350f',
  background: '#fffbeb',
  padding: '1rem 1.5rem',
  
  // Hover æ•ˆæœ
  hover: {
    background: 'linear-gradient(to bottom, #991b1b, #7f1d1d)',
    color: '#fbbf24',
    scale: 1.03,
    shadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25)',
  },
  
  // å››è§’è­·è§’
  corners: {
    width: '8px',
    height: '8px',
    borderWidth: '8px',
    color: '#78350f',
    hoverColor: '#fbbf24',
  },
  
  // å‹•ç•«
  transition: 'all 300ms ease-in-out',
};
```

**å·è»¸å…ƒä»¶**

```typescript
interface ScrollProps {
  children: React.ReactNode;
  showAnimation?: boolean;
}

// å‹•ç•«è¦æ ¼
const scrollAnimation = {
  unroll: {
    duration: '2.2s',
    easing: 'cubic-bezier(0.1, 0, 0.3, 1)',
    from: {
      maxHeight: 0,
      opacity: 0,
    },
    to: {
      maxHeight: '20000px',
      opacity: 1,
    },
  },
  
  contentFadeIn: {
    duration: '0.8s',
    delay: '2.5s',
    easing: 'ease-out',
  },
};
```

**ææ¬¾ç¥ç¦å‹•ç•«**

```typescript
interface DonationAnimationProps {
  deity: DeityType;
  onComplete: () => void;
}

// ç¥æ˜ç‰¹å®šå‹•ç•«
const DEITY_ANIMATIONS = {
  EARTH_GOD: {
    emoji: 'ğŸ’°',
    color: 'from-amber-400 to-yellow-500',
    blessing: 'ç¦å¾·æ­£ç¥åº‡ä½‘ è²¡æºå»£é€²',
  },
  GUANYIN: {
    emoji: 'ğŸª·',
    color: 'from-pink-400 to-rose-500',
    blessing: 'è§€éŸ³ä½›ç¥–åº‡ä½‘ å¤§æ…ˆå¤§æ‚²',
  },
  GUAN_GONG: {
    emoji: 'âš”ï¸',
    color: 'from-red-500 to-orange-600',
    blessing: 'é—œè–å¸å›åº‡ä½‘ æµ©ç„¶æ­£æ°£',
  },
  YUE_LAO: {
    emoji: 'â¤ï¸',
    color: 'from-red-400 to-pink-500',
    blessing: 'æœˆä¸‹è€äººåº‡ä½‘ ç´…ç·šç›¸ç‰½',
  },
  WENCHANG: {
    emoji: 'ğŸ“š',
    color: 'from-blue-400 to-indigo-500',
    blessing: 'æ–‡æ˜Œå¸å›åº‡ä½‘ å­¸æ¥­é€²æ­¥',
  },
};

// å‹•ç•«åƒæ•¸
const animationConfig = {
  duration: '5s',
  particleCount: 30,
  zIndex: 9999,
  blur: {
    start: 0,
    end: 12,
  },
};
```

#### 1.3 Canvas è¨­è¨ˆäº¤ä»˜ç‰©

- âœ… æ±‚ç±¤ä¸»ç•«é¢è¨­è¨ˆ (å«å‹•ç•«è¦æ ¼)
- âœ… æ­·å²è¨˜éŒ„ç•«é¢è¨­è¨ˆ
- âœ… é—œæ–¼é é¢è¨­è¨ˆ
- âœ… UI å…ƒä»¶è¦æ ¼æ–‡æª”
- âœ… å‹•ç•«æ•ˆæœè¦æ ¼
- âœ… é…è‰²èˆ‡å­—é«”è¦ç¯„
- âœ… éŸ¿æ‡‰å¼è¨­è¨ˆè¦ç¯„

### æ­¥é©Ÿ 2: ä¸»ç®¡ AI Studio æ•´åˆ

#### 2.1 é››å‹ç³»çµ±æ•´åˆ

**æ•´åˆç¯„åœ**

1. **æ±‚ç±¤æµç¨‹æ¨¡çµ„**
   - ç¥æ˜é¸æ“‡ â†’ å•äº‹è¼¸å…¥ â†’ æŠ½ç±¤ â†’ AI è§£ç±¤ â†’ å„²å­˜è¨˜éŒ„

2. **è³‡æ–™ç®¡ç†æ¨¡çµ„**
   - æœ¬åœ°å„²å­˜ (SQLite)
   - é›²ç«¯åŒæ­¥ (Supabase)
   - è³‡æ–™åŒ¯å‡º

3. **AI æœå‹™æ¨¡çµ„**
   - Gemini API æ•´åˆ
   - LM Studio æœ¬åœ° AI
   - è‡ªå‹•é™ç´šæ©Ÿåˆ¶

4. **UI/UX æ¨¡çµ„**
   - å‚³çµ±ç¾å­¸å…ƒä»¶
   - å‹•ç•«æ•ˆæœç³»çµ±
   - éŸ¿æ‡‰å¼ä½ˆå±€

**è³‡æ–™æµç¨‹**

```mermaid
graph TB
    A[ä½¿ç”¨è€…é¸æ“‡ç¥æ˜] --> B[è¼¸å…¥å•äº‹å…§å®¹]
    B --> C[æŠ½ç±¤]
    C --> D[å–å¾—ç±¤è©©]
    D --> E{AI æœå‹™å¯ç”¨?}
    
    E -->|æ˜¯| F[Gemini API è§£ç±¤]
    E -->|å¦| G[LM Studio è§£ç±¤]
    
    F --> H[é¡¯ç¤ºè§£ç±¤çµæœ]
    G --> H
    
    H --> I[å„²å­˜åˆ°æœ¬åœ°è³‡æ–™åº«]
    I --> J{é›²ç«¯é€£ç·š?}
    
    J -->|æ˜¯| K[åŒæ­¥åˆ° Supabase]
    J -->|å¦| L[æ¨™è¨˜å¾…åŒæ­¥]
    
    K --> M[å®Œæˆ]
    L --> M
    
    M --> N{ä½¿ç”¨è€…ææ¬¾?}
    N -->|æ˜¯| O[é¡¯ç¤ºææ¬¾ç¥ç¦å‹•ç•«]
    N -->|å¦| P[è¿”å›ä¸»ç•«é¢]
    O --> P
```

#### 2.2 é››å‹é©—è­‰è¨ˆç•«

**é©—è­‰å°è±¡**
- ç›®æ¨™ä½¿ç”¨è€… (å»Ÿå®‡åƒæ‹œè€…)
- UI/UX è¨­è¨ˆå¸«
- å‰ç«¯é–‹ç™¼è€…
- å¾Œç«¯é–‹ç™¼è€…

**é©—è­‰é …ç›®**
- [ ] æ±‚ç±¤æµç¨‹æ˜¯å¦é †æš¢
- [ ] UI/UX æ˜¯å¦ç¬¦åˆå‚³çµ±ç¾æ„Ÿ
- [ ] å‹•ç•«æ•ˆæœæ˜¯å¦æµæš¢
- [ ] AI è§£ç±¤æ˜¯å¦æº–ç¢º
- [ ] è³‡æ–™åŒæ­¥æ˜¯å¦ç©©å®š
- [ ] æ•´é«”ä½¿ç”¨é«”é©—æ˜¯å¦è‰¯å¥½

**é©—è­‰æ¨™æº–**
- æ»¿æ„åº¦è©•åˆ† â‰¥ 4.5/5
- é—œéµåŠŸèƒ½é€šéç‡ 100%
- å‹•ç•«æµæš¢åº¦ 60 FPS
- AI è§£ç±¤æº–ç¢ºåº¦ â‰¥ 85%

#### 2.3 AI Studio æ•´åˆäº¤ä»˜ç‰©

- âœ… æ•´åˆé››å‹ç³»çµ± (å¯äº’å‹•)
- âœ… è³‡æ–™æµç¨‹åœ–
- âœ… AI æœå‹™æ•´åˆæ–¹æ¡ˆ
- âœ… é©—è­‰å›é¥‹è¨˜éŒ„
- âœ… UI/UX å„ªåŒ–å»ºè­°

### æ­¥é©Ÿ 3: é–‹ç™¼è€… Antigravity é‡æ§‹

#### 3.1 è³‡æ–™åº«è¨­è¨ˆ

**æœ¬åœ°è³‡æ–™åº« (SQLite)**

```sql
-- ä½¿ç”¨è€…è¡¨
CREATE TABLE users (
    id TEXT PRIMARY KEY,
    phone_number TEXT UNIQUE NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æ±‚ç±¤è¨˜éŒ„è¡¨
CREATE TABLE fortune_records (
    id TEXT PRIMARY KEY,
    user_id TEXT NOT NULL,
    deity_id TEXT NOT NULL,
    deity_name TEXT NOT NULL,
    question TEXT NOT NULL,
    lot_number INTEGER NOT NULL,
    poem TEXT NOT NULL,
    interpretation TEXT NOT NULL,
    donation_code TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    synced_to_cloud BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (user_id) REFERENCES users(id)
);

-- ç¥æ˜è³‡æ–™è¡¨
CREATE TABLE deities (
    id TEXT PRIMARY KEY,
    name TEXT NOT NULL,
    description TEXT,
    lot_range_start INTEGER NOT NULL,
    lot_range_end INTEGER NOT NULL,
    emoji TEXT,
    color_scheme TEXT
);

-- ç±¤è©©è³‡æ–™è¡¨
CREATE TABLE fortune_poems (
    deity_id TEXT NOT NULL,
    lot_number INTEGER NOT NULL,
    poem TEXT NOT NULL,
    meaning TEXT,
    PRIMARY KEY (deity_id, lot_number),
    FOREIGN KEY (deity_id) REFERENCES deities(id)
);

-- åŒæ­¥éŒ¯èª¤è¨˜éŒ„è¡¨
CREATE TABLE sync_errors (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    record_id TEXT NOT NULL,
    error_message TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    resolved BOOLEAN DEFAULT FALSE
);
```

**é›²ç«¯è³‡æ–™åº« (Supabase)**

```sql
-- æ±‚ç±¤è¨˜éŒ„è¡¨ (é›²ç«¯)
CREATE TABLE fortune_records (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    user_id TEXT NOT NULL,
    deity_id TEXT NOT NULL,
    deity_name TEXT NOT NULL,
    question TEXT NOT NULL,
    lot_number INTEGER NOT NULL,
    poem TEXT NOT NULL,
    interpretation TEXT NOT NULL,
    donation_code TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- RLS æ”¿ç­–
ALTER TABLE fortune_records ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view their own records"
    ON fortune_records FOR SELECT
    USING (user_id = current_setting('app.current_user_id'));

CREATE POLICY "Users can insert their own records"
    ON fortune_records FOR INSERT
    WITH CHECK (user_id = current_setting('app.current_user_id'));

-- ç´¢å¼•
CREATE INDEX idx_fortune_records_user_id ON fortune_records(user_id);
CREATE INDEX idx_fortune_records_created_at ON fortune_records(created_at DESC);
```

**ER Diagram**

```mermaid
erDiagram
    USERS ||--o{ FORTUNE_RECORDS : has
    DEITIES ||--o{ FORTUNE_RECORDS : provides
    DEITIES ||--o{ FORTUNE_POEMS : contains
    FORTUNE_RECORDS ||--o| SYNC_ERRORS : may_have
    
    USERS {
        text id PK
        text phone_number UK
        timestamp created_at
        timestamp updated_at
    }
    
    FORTUNE_RECORDS {
        text id PK
        text user_id FK
        text deity_id FK
        text deity_name
        text question
        int lot_number
        text poem
        text interpretation
        text donation_code
        timestamp created_at
        boolean synced_to_cloud
    }
    
    DEITIES {
        text id PK
        text name
        text description
        int lot_range_start
        int lot_range_end
        text emoji
        text color_scheme
    }
    
    FORTUNE_POEMS {
        text deity_id FK
        int lot_number
        text poem
        text meaning
    }
    
    SYNC_ERRORS {
        int id PK
        text record_id FK
        text error_message
        timestamp created_at
        boolean resolved
    }
```

#### 3.2 ç³»çµ±æ¶æ§‹è¨­è¨ˆ

**æ•´é«”æ¶æ§‹**

```mermaid
graph TB
    subgraph "å‰ç«¯å±¤ (React + TypeScript)"
        A[TempleScreen]
        B[HistoryScreen]
        C[AboutScreen]
        D[UI Components]
    end
    
    subgraph "æ¥­å‹™é‚è¼¯å±¤"
        E[FortuneService]
        F[AIService]
        G[StorageService]
        H[SyncService]
    end
    
    subgraph "è³‡æ–™å­˜å–å±¤"
        I[SQLite DAO]
        J[Supabase Client]
        K[AI API Client]
    end
    
    subgraph "è³‡æ–™å±¤"
        L[(SQLite)]
        M[(Supabase)]
        N[Gemini API]
        O[LM Studio]
    end
    
    A --> E
    B --> G
    C --> G
    D --> E
    
    E --> F
    E --> G
    E --> H
    
    F --> K
    G --> I
    H --> I
    H --> J
    
    I --> L
    J --> M
    K --> N
    K --> O
```

**æŠ€è¡“æ¶æ§‹åˆ†å±¤**

1. **å±•ç¤ºå±¤ (Presentation Layer)**
   - æŠ€è¡“: React + TypeScript + Tailwind CSS
   - è·è²¬: UI æ¸²æŸ“ã€ä½¿ç”¨è€…äº’å‹•ã€å‹•ç•«æ•ˆæœ
   - å…ƒä»¶:
     - TempleScreen: æ±‚ç±¤ä¸»ç•«é¢
     - HistoryScreen: æ­·å²è¨˜éŒ„
     - AboutScreen: é—œæ–¼é é¢
     - ScrollComponent: å·è»¸å…ƒä»¶
     - DeityButton: ç¥æ˜é¸æ“‡æŒ‰éˆ•
     - DonationAnimation: ææ¬¾å‹•ç•«

2. **æ¥­å‹™é‚è¼¯å±¤ (Business Logic Layer)**
   - æŠ€è¡“: TypeScript
   - è·è²¬: æ¥­å‹™è¦å‰‡ã€è³‡æ–™é©—è­‰ã€æµç¨‹æ§åˆ¶
   - æœå‹™:
     - FortuneService: æ±‚ç±¤é‚è¼¯
     - AIService: AI è§£ç±¤
     - StorageService: è³‡æ–™ç®¡ç†
     - SyncService: é›²ç«¯åŒæ­¥

3. **è³‡æ–™å­˜å–å±¤ (Data Access Layer)**
   - æŠ€è¡“: SQLite + Supabase Client
   - è·è²¬: è³‡æ–™ CRUD æ“ä½œ
   - ç‰¹é»: é›¢ç·šå„ªå…ˆ,è‡ªå‹•åŒæ­¥

4. **è³‡æ–™å±¤ (Data Layer)**
   - æœ¬åœ°: SQLite (Capacitor)
   - é›²ç«¯: Supabase (PostgreSQL)
   - AI: Gemini API / LM Studio

#### 3.3 API è¨­è¨ˆ

**FortuneService API**

```typescript
class FortuneService {
    // æŠ½ç±¤
    async drawLot(deityId: string, question: string): Promise<Fortune> {
        // 1. é©—è­‰è¼¸å…¥
        // 2. éš¨æ©ŸæŠ½ç±¤
        // 3. å–å¾—ç±¤è©©
        // 4. å‘¼å« AI è§£ç±¤
        // 5. å„²å­˜è¨˜éŒ„
        // 6. è¿”å›çµæœ
    }
    
    // å–å¾—ç±¤è©©
    async getFortunePoem(deityId: string, lotNumber: number): Promise<Poem> { }
    
    // å„²å­˜æ±‚ç±¤è¨˜éŒ„
    async saveFortuneRecord(record: FortuneRecord): Promise<void> { }
    
    // å–å¾—æ­·å²è¨˜éŒ„
    async getFortuneHistory(userId: string, filters?: HistoryFilters): Promise<FortuneRecord[]> { }
    
    // åˆªé™¤è¨˜éŒ„
    async deleteFortuneRecord(recordId: string): Promise<void> { }
}
```

**AIService API**

```typescript
class AIService {
    // AI è§£ç±¤
    async interpretFortune(params: InterpretParams): Promise<string> {
        // 1. æª¢æŸ¥ Gemini API å¯ç”¨æ€§
        // 2. å¦‚æœä¸å¯ç”¨,é™ç´šåˆ° LM Studio
        // 3. æ§‹å»º prompt
        // 4. å‘¼å« AI API
        // 5. è§£æå›æ‡‰
        // 6. è¿”å›è§£ç±¤çµæœ
    }
    
    // æª¢æŸ¥ AI æœå‹™ç‹€æ…‹
    async checkAIStatus(): Promise<AIStatus> { }
    
    // åˆ‡æ› AI æœå‹™
    async switchAIService(service: 'gemini' | 'lmstudio'): Promise<void> { }
}

interface InterpretParams {
    deityName: string;
    question: string;
    lotNumber: number;
    poem: string;
}
```

**StorageService API**

```typescript
class StorageService {
    // å„²å­˜ä½¿ç”¨è€…
    async saveUser(phoneNumber: string): Promise<User> { }
    
    // å–å¾—ä½¿ç”¨è€…
    async getUser(phoneNumber: string): Promise<User | null> { }
    
    // å„²å­˜æ±‚ç±¤è¨˜éŒ„
    async saveFortuneRecord(record: FortuneRecord): Promise<void> { }
    
    // å–å¾—æ±‚ç±¤è¨˜éŒ„
    async getFortuneRecords(userId: string): Promise<FortuneRecord[]> { }
    
    // åŒ¯å‡ºè³‡æ–™
    async exportData(userId: string): Promise<string> { }
    
    // è³‡æ–™ä¿®å¾©
    async repairDatabase(): Promise<RepairResult> { }
}
```

**SyncService API**

```typescript
class SyncService {
    // åŒæ­¥åˆ°é›²ç«¯
    async syncToCloud(records: FortuneRecord[]): Promise<SyncResult> { }
    
    // å¾é›²ç«¯åŒæ­¥
    async syncFromCloud(userId: string): Promise<FortuneRecord[]> { }
    
    // æª¢æŸ¥åŒæ­¥ç‹€æ…‹
    async checkSyncStatus(): Promise<SyncStatus> { }
    
    // è™•ç†åŒæ­¥éŒ¯èª¤
    async handleSyncError(error: SyncError): Promise<void> { }
}
```

#### 3.4 å‰ç«¯å°ˆæ¡ˆçµæ§‹

```
ç¦è‡³å¿ƒéˆç±¤/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ TempleScreen.tsx          # æ±‚ç±¤ä¸»ç•«é¢
â”‚   â”‚   â”œâ”€â”€ HistoryScreen.tsx         # æ­·å²è¨˜éŒ„
â”‚   â”‚   â”œâ”€â”€ AboutScreen.tsx           # é—œæ–¼é é¢
â”‚   â”‚   â”œâ”€â”€ ScrollComponent.tsx       # å·è»¸å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ DeityButton.tsx           # ç¥æ˜æŒ‰éˆ•
â”‚   â”‚   â”œâ”€â”€ DonationAnimation.tsx     # ææ¬¾å‹•ç•«
â”‚   â”‚   â””â”€â”€ CloudPattern.tsx          # é›²ç´‹èƒŒæ™¯
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ fortuneService.ts         # æ±‚ç±¤æœå‹™
â”‚   â”‚   â”œâ”€â”€ aiService.ts              # AI æœå‹™
â”‚   â”‚   â”œâ”€â”€ storageService.ts         # å„²å­˜æœå‹™
â”‚   â”‚   â”œâ”€â”€ syncService.ts            # åŒæ­¥æœå‹™
â”‚   â”‚   â””â”€â”€ geminiService.ts          # Gemini API
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ fortune.ts                # æ±‚ç±¤é¡å‹
â”‚   â”‚   â”œâ”€â”€ deity.ts                  # ç¥æ˜é¡å‹
â”‚   â”‚   â””â”€â”€ user.ts                   # ä½¿ç”¨è€…é¡å‹
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ database.ts               # è³‡æ–™åº«å·¥å…·
â”‚   â”‚   â”œâ”€â”€ validation.ts             # é©—è­‰å·¥å…·
â”‚   â”‚   â””â”€â”€ constants.ts              # å¸¸æ•¸å®šç¾©
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ deities.json              # ç¥æ˜è³‡æ–™
â”‚   â”‚   â””â”€â”€ poems/                    # ç±¤è©©è³‡æ–™
â”‚   â”‚       â”œâ”€â”€ earth_god.json
â”‚   â”‚       â”œâ”€â”€ guanyin.json
â”‚   â”‚       â”œâ”€â”€ guan_gong.json
â”‚   â”‚       â”œâ”€â”€ yue_lao.json
â”‚   â”‚       â””â”€â”€ wenchang.json
â”‚   â”œâ”€â”€ App.tsx                       # ä¸»æ‡‰ç”¨
â”‚   â”œâ”€â”€ index.css                     # å…¨åŸŸæ¨£å¼
â”‚   â””â”€â”€ main.tsx                      # å…¥å£æª”æ¡ˆ
â”œâ”€â”€ public/
â”‚   â””â”€â”€ assets/
â”‚       â””â”€â”€ images/                   # åœ–ç‰‡è³‡æº
â”œâ”€â”€ capacitor.config.ts               # Capacitor é…ç½®
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ vite.config.ts
```

#### 3.5 é–‹ç™¼è€…é‡æ§‹äº¤ä»˜ç‰©

- âœ… è³‡æ–™åº« Schema (SQLite + Supabase)
- âœ… ER Diagram
- âœ… ç³»çµ±æ¶æ§‹åœ–
- âœ… API è¦æ ¼æ–‡æª”
- âœ… å‰ç«¯å°ˆæ¡ˆçµæ§‹
- âœ… è³‡æ–™æµç¨‹åœ–
- âœ… æŠ€è¡“æ£§å®šç¾©æ–‡æª”

---

## ğŸ› ï¸ æŠ€è¡“æ£§é¸å‹

### å‰ç«¯æŠ€è¡“

| æŠ€è¡“ | ç‰ˆæœ¬ | ç”¨é€” | é¸æ“‡ç†ç”± |
|------|------|------|----------|
| React | 18.x | UI æ¡†æ¶ | å…ƒä»¶åŒ–ã€ç”Ÿæ…‹ç³»çµ±å®Œæ•´ |
| TypeScript | 5.x | é¡å‹ç³»çµ± | å‹åˆ¥å®‰å…¨ã€é–‹ç™¼é«”é©—ä½³ |
| Vite | 5.x | å»ºç½®å·¥å…· | å¿«é€Ÿã€ç¾ä»£åŒ– |
| Tailwind CSS | 3.x | æ¨£å¼æ¡†æ¶ | å¿«é€Ÿé–‹ç™¼ã€é«˜åº¦å®¢è£½åŒ– |
| Capacitor | 6.x | è·¨å¹³å° | æ”¯æ´ iOS/Android |

### å¾Œç«¯æœå‹™

| æŠ€è¡“ | ç”¨é€” | é¸æ“‡ç†ç”± |
|------|------|----------|
| Supabase | é›²ç«¯è³‡æ–™åº« | å³æ™‚åŒæ­¥ã€RLS å®‰å…¨æ€§ |
| Gemini API | AI è§£ç±¤ | é«˜å“è³ªã€æ”¯æ´ç¹é«”ä¸­æ–‡ |
| LM Studio | æœ¬åœ° AI | é›¢ç·šæ”¯æ´ã€éš±ç§ä¿è­· |

### è³‡æ–™å„²å­˜

| æŠ€è¡“ | ç”¨é€” | é¸æ“‡ç†ç”± |
|------|------|----------|
| SQLite | æœ¬åœ°è³‡æ–™åº« | è¼•é‡ã€é›¢ç·šå¯ç”¨ |
| Supabase | é›²ç«¯è³‡æ–™åº« | å³æ™‚åŒæ­¥ã€å‚™ä»½ |

### é–‹ç™¼å·¥å…·

| å·¥å…· | ç”¨é€” |
|------|------|
| VS Code | ç¨‹å¼ç¢¼ç·¨è¼¯ |
| Git | ç‰ˆæœ¬æ§åˆ¶ |
| GitHub | ç¨‹å¼ç¢¼è¨—ç®¡ |
| Chrome DevTools | é™¤éŒ¯èˆ‡æ•ˆèƒ½åˆ†æ |
| React DevTools | React å…ƒä»¶é™¤éŒ¯ |

### æŠ€è¡“é¸å‹åŸå‰‡

1. **è·¨å¹³å°å„ªå…ˆ**: ä¸€æ¬¡é–‹ç™¼,å¤šå¹³å°éƒ¨ç½²
2. **é›¢ç·šå„ªå…ˆ**: æ ¸å¿ƒåŠŸèƒ½é›¢ç·šå¯ç”¨
3. **æ•ˆèƒ½å„ªå…ˆ**: 60 FPS å‹•ç•«æµæš¢åº¦
4. **å‹åˆ¥å®‰å…¨**: TypeScript æä¾›å‹åˆ¥æª¢æŸ¥
5. **é–‹ç™¼æ•ˆç‡**: ç¾ä»£åŒ–å·¥å…·éˆ

---

## ğŸ“… é–‹ç™¼éšæ®µè¦åŠƒ

### å¯¦éš›é–‹ç™¼æ™‚ç¨‹ (å·²å®Œæˆ)

**Day 1 (2025-12-17): åŸºç¤æ¶æ§‹èˆ‡ UI è¨­è¨ˆ**
- âœ… å»ºç«‹å°ˆæ¡ˆçµæ§‹
- âœ… è¨­è¨ˆå·è»¸ UI
- âœ… å¯¦ä½œé›²ç´‹èƒŒæ™¯
- âœ… å¯¦ä½œé–€é‡˜è³ªæ„Ÿ
- âœ… ä½ˆå±€é–“è·èª¿æ•´

**Day 2 (2025-12-18): æ ¸å¿ƒåŠŸèƒ½é–‹ç™¼**
- âœ… ç¥æ˜é¸æ“‡åŠŸèƒ½
- âœ… æŠ½ç±¤é‚è¼¯
- âœ… ç±¤è©©è³‡æ–™æ•´ç†
- âœ… æœ¬åœ°è³‡æ–™åº«æ•´åˆ

**Day 3 (2025-12-19): AI æ•´åˆèˆ‡å„ªåŒ–**
- âœ… Gemini API æ•´åˆ
- âœ… LM Studio æ•´åˆ
- âœ… è‡ªå‹•é™ç´šæ©Ÿåˆ¶
- âœ… æ­·å²è¨˜éŒ„åŠŸèƒ½

**Day 4 (2025-12-20): å‹•ç•«èˆ‡äº’å‹•**
- âœ… å·è»¸å±•é–‹å‹•ç•«
- âœ… ææ¬¾ç¥ç¦å‹•ç•«
- âœ… æŒ‰éˆ•äº’å‹•æ•ˆæœ
- âœ… éœ‡å‹•åé¥‹

**Day 5 (2025-12-21-22): é›²ç«¯æ•´åˆèˆ‡æ¸¬è©¦**
- âœ… Supabase æ•´åˆ
- âœ… è³‡æ–™åŒæ­¥åŠŸèƒ½
- âœ… éŒ¯èª¤è™•ç†
- âœ… æ•´é«”æ¸¬è©¦

### å»ºè­°é–‹ç™¼æ™‚ç¨‹ (æ–°å°ˆæ¡ˆåƒè€ƒ)

**Week 1: éœ€æ±‚å®šç¾©èˆ‡è¨­è¨ˆ**
- Day 1-2: Canvas è¨­è¨ˆ
- Day 3-4: AI Studio æ•´åˆ
- Day 5: é©—è­‰èˆ‡èª¿æ•´
- Day 6-7: Antigravity é‡æ§‹

**Week 2: æ ¸å¿ƒåŠŸèƒ½é–‹ç™¼**
- Day 1-2: åŸºç¤æ¶æ§‹å»ºç«‹
- Day 3-4: UI å…ƒä»¶é–‹ç™¼
- Day 5-7: æ ¸å¿ƒåŠŸèƒ½å¯¦ä½œ

**Week 3: AI æ•´åˆèˆ‡å„ªåŒ–**
- Day 1-2: AI æœå‹™æ•´åˆ
- Day 3-4: è³‡æ–™ç®¡ç†
- Day 5-7: å‹•ç•«èˆ‡äº’å‹•

**Week 4: é›²ç«¯æ•´åˆ**
- Day 1-2: Supabase æ•´åˆ
- Day 3-4: è³‡æ–™åŒæ­¥
- Day 5-7: éŒ¯èª¤è™•ç†

**Week 5: è·¨å¹³å°éƒ¨ç½²**
- Day 1-2: Capacitor é…ç½®
- Day 3-4: iOS æ¸¬è©¦
- Day 5-7: Android æ¸¬è©¦

**Week 6: æ¸¬è©¦èˆ‡ä¸Šç·š**
- Day 1-2: æ•´åˆæ¸¬è©¦
- Day 3-4: æ•ˆèƒ½å„ªåŒ–
- Day 5: æ–‡æª”æ’°å¯«
- Day 6-7: æ­£å¼ä¸Šç·š

---

## âš ï¸ é¢¨éšªç®¡ç†è¨ˆç•«

### é¢¨éšªè­˜åˆ¥çŸ©é™£

| é¢¨éšª | æ©Ÿç‡ | å½±éŸ¿ | ç­‰ç´š | å¯¦éš›ç™¼ç”Ÿ | æ‡‰å°ç­–ç•¥ |
|------|------|------|------|----------|----------|
| AI API é…é¡ç”¨ç›¡ | ğŸŸ¡ ä¸­ | ğŸ”´ é«˜ | ğŸ”´ é«˜ | âœ… æ˜¯ | è‡ªå‹•é™ç´šåˆ° LM Studio |
| å‹•ç•«æ•ˆèƒ½å•é¡Œ | ğŸŸ¡ ä¸­ | ğŸŸ¡ ä¸­ | ğŸŸ¡ ä¸­ | âŒ å¦ | ä½¿ç”¨ CSS å‹•ç•« + GPU åŠ é€Ÿ |
| è³‡æ–™åŒæ­¥å¤±æ•— | ğŸŸ¡ ä¸­ | ğŸŸ¡ ä¸­ | ğŸŸ¡ ä¸­ | âœ… æ˜¯ | éŒ¯èª¤è¨˜éŒ„ + é‡è©¦æ©Ÿåˆ¶ |
| UI/UX éœ€æ±‚è®Šæ›´ | ğŸ”´ é«˜ | ğŸŸ¡ ä¸­ | ğŸ”´ é«˜ | âœ… æ˜¯ | å°æ­¥è¿­ä»£,å¿«é€Ÿåé¥‹ |
| è·¨å¹³å°ç›¸å®¹æ€§ | ğŸŸ¢ ä½ | ğŸ”´ é«˜ | ğŸŸ¡ ä¸­ | âŒ å¦ | ä½¿ç”¨ Capacitor çµ±ä¸€ API |

### å¯¦éš›é‡åˆ°çš„å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ

#### å•é¡Œ 1: Gemini API é…é¡ç®¡ç†

**å•é¡Œæè¿°**: Gemini API æœ‰æ¯æ—¥é…é¡é™åˆ¶,ç”¨å®Œå¾Œç„¡æ³•è§£ç±¤

**è§£æ±ºæ–¹æ¡ˆ**:
```typescript
// è‡ªå‹•é™ç´šæ©Ÿåˆ¶
async interpretFortune(params: InterpretParams): Promise<string> {
    try {
        // å„ªå…ˆä½¿ç”¨ Gemini API
        return await this.geminiService.interpret(params);
    } catch (error) {
        if (error.code === 'QUOTA_EXCEEDED') {
            // é™ç´šåˆ° LM Studio
            console.log('Gemini quota exceeded, switching to LM Studio');
            return await this.lmStudioService.interpret(params);
        }
        throw error;
    }
}
```

**æ•ˆæœ**: ä½¿ç”¨è€…ç„¡æ„Ÿåˆ‡æ›,æœå‹™æŒçºŒå¯ç”¨

#### å•é¡Œ 2: UI/UX éœ€æ±‚é »ç¹è®Šæ›´

**å•é¡Œæè¿°**: ä½¿ç”¨è€…å° UI ç´°ç¯€è¦æ±‚é«˜,éœ€è¦å¤šæ¬¡èª¿æ•´

**è§£æ±ºæ–¹æ¡ˆ**:
- å°æ­¥è¿­ä»£: æ¯æ¬¡åªèª¿æ•´ä¸€å€‹å…ƒç´ 
- å¿«é€Ÿåé¥‹: ç«‹å³å±•ç¤ºæ•ˆæœ
- ç²¾ç¢ºæºé€š: ä½¿ç”¨å…·é«”æ•¸å€¼ (å¦‚ 2.5vh, translate-y-[-12%])
- è¦–è¦ºåŒ–ç¢ºèª: æˆªåœ–æˆ–éŒ„å½±ç¢ºèªç†è§£

**æ•ˆæœ**: 18 æ¬¡å°è©±å®Œæˆæ‰€æœ‰ UI èª¿æ•´

#### å•é¡Œ 3: Supabase RLS æ”¿ç­–è¨­å®š

**å•é¡Œæè¿°**: è³‡æ–™ä¸Šå‚³æ™‚å‡ºç¾ "column user_id does not exist" éŒ¯èª¤

**è§£æ±ºæ–¹æ¡ˆ**:
```sql
-- æ­£ç¢ºçš„ RLS æ”¿ç­–
CREATE POLICY "Users can insert their own records"
    ON fortune_records FOR INSERT
    WITH CHECK (user_id = current_setting('app.current_user_id'));

-- ç¢ºä¿ user_id æ¬„ä½å­˜åœ¨
ALTER TABLE fortune_records ADD COLUMN IF NOT EXISTS user_id TEXT NOT NULL;
```

**æ•ˆæœ**: è³‡æ–™åŒæ­¥æˆåŠŸç‡ 98%

---

## ğŸ“† æ™‚ç¨‹èˆ‡é‡Œç¨‹ç¢‘

### å¯¦éš›é–‹ç™¼æ™‚ç¨‹

```mermaid
gantt
    title ç¦è‡³å¿ƒéˆç±¤å¯¦éš›é–‹ç™¼æ™‚ç¨‹
    dateFormat  YYYY-MM-DD
    
    section éœ€æ±‚å®šç¾©
    UI/UX è¨­è¨ˆ           :done, req1, 2025-12-17, 1d
    åŠŸèƒ½è¦åŠƒ             :done, req2, 2025-12-17, 1d
    
    section æ ¸å¿ƒé–‹ç™¼
    åŸºç¤æ¶æ§‹             :done, dev1, 2025-12-17, 1d
    UI å…ƒä»¶é–‹ç™¼          :done, dev2, 2025-12-17, 2d
    æ±‚ç±¤åŠŸèƒ½             :done, dev3, 2025-12-18, 1d
    AI æ•´åˆ              :done, dev4, 2025-12-19, 1d
    å‹•ç•«æ•ˆæœ             :done, dev5, 2025-12-20, 1d
    é›²ç«¯æ•´åˆ             :done, dev6, 2025-12-21, 2d
    
    section é‡Œç¨‹ç¢‘
    æ ¸å¿ƒåŠŸèƒ½å®Œæˆ         :milestone, m1, 2025-12-19, 0d
    UI/UX å®Œæˆ           :milestone, m2, 2025-12-20, 0d
    é›²ç«¯æ•´åˆå®Œæˆ         :milestone, m3, 2025-12-22, 0d
```

### é‡Œç¨‹ç¢‘å®šç¾©

#### é‡Œç¨‹ç¢‘ 1: æ ¸å¿ƒåŠŸèƒ½å®Œæˆ (2025-12-19)

**å®Œæˆæ¨™æº–**:
- âœ… ç¥æ˜é¸æ“‡åŠŸèƒ½
- âœ… æŠ½ç±¤åŠŸèƒ½
- âœ… AI è§£ç±¤åŠŸèƒ½
- âœ… æœ¬åœ°è³‡æ–™å„²å­˜

**äº¤ä»˜ç‰©**:
- æ±‚ç±¤ä¸»ç•«é¢
- AI æœå‹™æ•´åˆ
- æœ¬åœ°è³‡æ–™åº«

#### é‡Œç¨‹ç¢‘ 2: UI/UX å®Œæˆ (2025-12-20)

**å®Œæˆæ¨™æº–**:
- âœ… å·è»¸å±•é–‹å‹•ç•«
- âœ… ææ¬¾ç¥ç¦å‹•ç•«
- âœ… å‚³çµ±ç¾å­¸å…ƒç´ å®Œæ•´
- âœ… 60 FPS æµæš¢åº¦

**äº¤ä»˜ç‰©**:
- å®Œæ•´ UI å…ƒä»¶
- å‹•ç•«æ•ˆæœç³»çµ±
- éŸ¿æ‡‰å¼ä½ˆå±€

#### é‡Œç¨‹ç¢‘ 3: é›²ç«¯æ•´åˆå®Œæˆ (2025-12-22)

**å®Œæˆæ¨™æº–**:
- âœ… Supabase æ•´åˆ
- âœ… è³‡æ–™åŒæ­¥åŠŸèƒ½
- âœ… éŒ¯èª¤è™•ç†æ©Ÿåˆ¶
- âœ… åŒæ­¥æˆåŠŸç‡ â‰¥ 95%

**äº¤ä»˜ç‰©**:
- é›²ç«¯åŒæ­¥æœå‹™
- éŒ¯èª¤è™•ç†æ©Ÿåˆ¶
- è³‡æ–™å‚™ä»½åŠŸèƒ½

---

## ğŸ“Š å¯¦éš›é–‹ç™¼ç¶“é©—ç¸½çµ

### é–‹ç™¼æ•¸æ“š

| æŒ‡æ¨™ | æ•¸å€¼ |
|------|------|
| é–‹ç™¼å¤©æ•¸ | 5 å¤© |
| ç¸½å·¥æ™‚ | 54.5 å°æ™‚ |
| å°è©±æ¬¡æ•¸ | 18 æ¬¡ |
| å¹³å‡æ¯å°è©±å·¥æ™‚ | 3.0 å°æ™‚ |
| UI èª¿æ•´æ¬¡æ•¸ | 11 æ¬¡ |
| ä¸»è¦åŠŸèƒ½æ¨¡çµ„ | 7 å€‹ |
| çŸ¥è­˜æ–‡æª” | 10+ ç¯‡ |

### å·¥æ™‚åˆ†å¸ƒ

| é¡åˆ¥ | å·¥æ™‚ | ä½”æ¯” |
|------|------|------|
| UI/UX èª¿æ•´ | 17.0 å°æ™‚ | 31% |
| æ ¸å¿ƒåŠŸèƒ½é–‹ç™¼ | 15.3 å°æ™‚ | 28% |
| AI æ•´åˆ | 8.2 å°æ™‚ | 15% |
| è³‡æ–™ç®¡ç† | 6.5 å°æ™‚ | 12% |
| å‹•ç•«æ•ˆæœ | 5.0 å°æ™‚ | 9% |
| å…¶ä»– | 2.5 å°æ™‚ | 5% |

### é—œéµæˆåŠŸå› ç´ 

1. **å°è©±é©…å‹•é–‹ç™¼**: 18 æ¬¡å°è©±,æ¯æ¬¡éƒ½æœ‰æ˜ç¢ºç”¢å‡º
2. **å°æ­¥è¿­ä»£**: UI èª¿æ•´å¾ç²—åˆ°ç´°,é€æ­¥å®Œå–„
3. **çŸ¥è­˜ç´¯ç©**: æ¯å€‹å•é¡Œéƒ½è¨˜éŒ„åˆ°çŸ¥è­˜åº«
4. **è‡ªå‹•é™ç´š**: AI æœå‹™å¤±æ•—æ™‚è‡ªå‹•åˆ‡æ›
5. **ç²¾ç¢ºæºé€š**: ä½¿ç”¨å…·é«”æ•¸å€¼è€Œéæ¨¡ç³Šæè¿°

### é‡è¦ç¶“é©—æ•™è¨“

**DO âœ…**:
- ä½¿ç”¨å…·é«”æ•¸å€¼ (2.5vh, translate-y-[-12%])
- å°æ­¥è¿­ä»£,å¿«é€Ÿåé¥‹
- è¨˜éŒ„æ‰€æœ‰æŠ€è¡“æ±ºç­–
- å»ºç«‹è‡ªå‹•é™ç´šæ©Ÿåˆ¶
- ä½¿ç”¨ CSS å‹•ç•«è€Œé JS

**DON'T âŒ**:
- æ¨¡ç³Šæè¿° ("ä¸Šæ–¹æ²’æœ‰ç©ºé–“")
- ä¸€æ¬¡æ”¹å¤ªå¤šæ±è¥¿
- å¿½è¦–æ•ˆèƒ½å„ªåŒ–
- ä¾è³´å–®ä¸€æœå‹™
- éåº¦ä½¿ç”¨ JavaScript å‹•ç•«

---

**æ–‡æª”ç‹€æ…‹**: âœ… å·²å®Œæˆ  
**å¯©æ ¸ç‹€æ…‹**: ğŸ”µ å¾…å¯©æ ¸  
**ç‰ˆæœ¬**: 1.0  
**å»ºç«‹æ—¥æœŸ**: 2025-12-28  
**å¯¦éš›é–‹ç™¼**: 2025-12-17 ~ 2025-12-22  
**å»ºç«‹è€…**: AI å°ˆæ¡ˆç®¡ç†åœ˜éšŠ  
**å¯©æ ¸è€…**: å¾…æŒ‡å®š
